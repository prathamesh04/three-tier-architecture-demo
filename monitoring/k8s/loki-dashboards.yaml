apiVersion: v1
kind: ConfigMap
metadata:
  name: loki-dashboards
  namespace: loki
  labels:
    app: loki
    component: dashboards
    grafana_dashboard: "1"
data:
  # This ConfigMap will be populated with dashboard JSON files
  # when you run 'make build' in the mixins directory
  #
  # To populate:
  # 1. cd monitoring/mixins
  # 2. make build  
  # 3. kubectl create configmap loki-dashboards --from-file=compiled/dashboards/ --dry-run=client -o yaml > ../k8s/loki-dashboards.yaml
  loki-overview.json: |
    # Generated dashboard will be placed here
  loki-tsdb.json: |
    # TSDB-specific dashboard will be placed here (when tsdb: true)
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: loki-monitoring-config
  namespace: loki
  labels:
    app: loki
    component: monitoring-config
data:
  config.json: |
    {
      "tsdb": true,
      "enableStructuredMetadata": true,
      "cluster": "",
      "namespace": "loki",
      "dashboard": {
        "prefix": "Loki / ",
        "tags": ["loki"]
      }
    }